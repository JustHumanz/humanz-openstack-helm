conf:
  octavia_api_uwsgi:
    uwsgi:
      wsgi-file: /var/lib/openstack/bin/octavia-wsgi
  octavia:
    DEFAULT:
      debug: "True"
      log_config_append: null
    api_settings:
      default_provider_driver: amphorav2
      enabled_provider_drivers: ovn:'The ovn Provider',amphorav2:'The v2 amphora driver.',amphora:'The Octavia Amphora driver.',octavia:'Deprecated name of Amphora driver.' 
      healthcheck_enabled: false
    certificates:
      ca_certificate: /etc/octavia/certs/server/ca.crt
      ca_private_key: /etc/octavia/certs/server/tls.key
      ca_private_key_passphrase: null
      endpoint_type: internalURL
      insecure: "True"
    haproxy_amphora:
      client_cert: /etc/octavia/certs/client/tls-combined.pem
      server_ca: /etc/octavia/certs/server/ca.crt
    controller_worker:
      amp_image_owner_id: f67d875976bc4d4aad13979bcbf98e96
      amp_secgroup_list: 44c21478-c953-4689-a2bc-a7dee5d9acba
      amp_flavor_id: 6db3ef45-ce99-4a39-b2fc-41a05a2e1096
      amp_boot_network_list: dc9dd118-de10-4ac3-a608-3bc8b18fd4ce
      amp_ssh_key_name: octavia-key
      amp_image_tag: octavia-amphora-image
      network_driver: allowed_address_pairs_driver
      compute_driver: compute_nova_driver
      amphora_driver: amphora_haproxy_rest_driver
      client_ca: /etc/octavia/certs/client/ca.crt
      workers: 4
    task_flow:
      jobboard_enabled: false
    health_manager:
      controller_ip_port_list: "192.168.18.100:5555"
    cinder:
      endpoint_type: internalURL
      insecure: "True"
    glance:
      endpoint_type: internalURL
      insecure: "True"
    neutron:
      endpoint_type: internalURL
      insecure: "True"
    nova:
      endpoint_type: internalURL
      insecure: "True"
    keystone_authtoken:
      endpoint_type: internalURL
      insecure: "True"
    service_auth:
      insecure: "True"

endpoints:
  load_balancer:
    name: octavia
    hosts:
      default: octavia-api
    scheme:
      public: https
    port:
      api:
        public: 443

manifests:
  ingress_api: false
  service_ingress_api: false

network:
  api:
    node_port:
      enabled: true
      port: 32534

pod:
  probes:
    api:
      octavia-api:
        liveness:
          enabled: false
        readiness:
          enabled: false
  replicas:
    api: 1
    worker: 1
    housekeeping: 1
  mounts:
    octavia_api:
      octavia_api:
        volumeMounts:
          - name: octavia-server-ca
            mountPath: /etc/octavia/certs/server
          - name: octavia-client-certs
            mountPath: /etc/octavia/certs/client
        volumes:
          - name: octavia-server-ca
            secret:
              secretName: octavia-server-ca
          - name: octavia-client-certs
            secret:
              secretName: octavia-client-certs
    octavia_worker:
      octavia_worker:
        volumeMounts:
          - name: octavia-server-ca
            mountPath: /etc/octavia/certs/server
          - name: octavia-client-certs
            mountPath: /etc/octavia/certs/client
        volumes:
          - name: octavia-server-ca
            secret:
              secretName: octavia-server-ca
          - name: octavia-client-certs
            secret:
              secretName: octavia-client-certs
    octavia_housekeeping:
      octavia_housekeeping:
        volumeMounts:
          - name: octavia-server-ca
            mountPath: /etc/octavia/certs/server
          - name: octavia-client-certs
            mountPath: /etc/octavia/certs/client
        volumes:
          - name: octavia-server-ca
            secret:
              secretName: octavia-server-ca
          - name: octavia-client-certs
            secret:
              secretName: octavia-client-certs
    octavia_health_manager:
      octavia_health_manager:
        volumeMounts:
          - name: octavia-server-ca
            mountPath: /etc/octavia/certs/server
          - name: octavia-client-certs
            mountPath: /etc/octavia/certs/client
        volumes:
          - name: octavia-server-ca
            secret:
              secretName: octavia-server-ca
          - name: octavia-client-certs
            secret:
              secretName: octavia-client-certs

security_context:
    octavia_worker:
      container:
        octavia_worker:
          capabilities:
            add:
              - NET_ADMIN
              - NET_RAW
    octavia_health_manager:
      container:
        octavia_health_manager:
          capabilities:
            add:
              - NET_ADMIN
              - NET_RAW